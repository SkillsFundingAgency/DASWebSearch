@using Sfa.Das.Sas.Web.Extensions
@using Sfa.Das.Sas.Web.ViewModels
@model ProviderDetailViewModel

@{
    ViewBag.Title = "Provider Details";
    ViewBag.Description = "";
    ViewBag.PageId = "provider-detail-view";
}
<main id="content" class="provider-detail">
    <div class="grid-row">
        <div class="column-two-thirds">
            <h1 class="heading-xlarge" id="provider-name">
                @Model.ProviderName 
                @if (@Model.NationalProvider)
                {
                    <span class="tag-national"><span class="font-adjust">National</span></span>
                }
            </h1>
        </div>
    </div>
    <div class="grid-row">
        <div class="column-two-thirds">
            <dl class="data-list--provider data-list--compact">
                @if (!string.IsNullOrEmpty(Model.TradingNames))
                {
                    <dt>Trading names:</dt>
                    <dd id="trading-names">@Model.TradingNames</dd>
                }
                <dt>Trading names:</dt>
                <dd id="trading-names">Dutch College, Birmingham Central, United Kingdom</dd>
                <dt>UKPRN:</dt>
                <dd>@Model.UkPrn</dd>                   
            </dl>
            <p class="markdown-header-text">About this Provider</p>
            @if (string.IsNullOrEmpty(Model.MarketingInfo))
            {
                <span>There is no marketing information available about this provider.</span>
            }
            else
            {
                @Html.MarkdownToHtml(Model.MarketingInfo)
            }
            
  
            @if (Model.ApprenticeshipTrainingSummary != null && Model.ApprenticeshipTrainingSummary.Count > 0)
            {
               <div id="search-app-offered">
                     <h2 class="heading-medium app-offered">
                        @Model.ApprenticeshipTrainingSummary.Count Apprenticeships offered
                    </h2>
                    <!--search box-->               
                    @*<form id="search-box" method="get" action="#">
                            <fieldset class="inline">
                                <input type="text" id="search-input" class="search-text" name="q" size="21" maxlength="120" value="Search">
                                <input type="submit" value=" " class="submit-search">
                            </fieldset>
                    </form>*@            
                </div>
                <table class="app-details">
                    <thead>
                        <tr>
                            <th>Apprenticeship</th>
                            <th>Type</th>
                            <th>Level</th>
                            <th><span class="visibility-hidden">View details</span></th>
                        </tr>
                    </thead>
                    <tbody>
                @foreach (var item in Model.ApprenticeshipTrainingSummary.ApprenticeshipTrainingItems)
                {
                    <tr>
                        <td>@item.Name</td>
                        <td>@item.Type</td>
                        <td>@item.Level</td>
                        <td><a href="">Details</a></td>
                    </tr>
                }
                    </tbody>
                </table>
            }
        </div>
        <div class="column-one-third">
            <div class="panel--contact">
                <h2 class="heading-medium">Contact details</h2>
                <dl>
                     @{var linkProtocol = Model.Website.StartsWith("http") ? string.Empty : "http://";}
                    <dt class="apprenticeshipContactTitle">Website:</dt>
                    <dd>
                        <a href="@linkProtocol@Model.Website" rel="external" target="_blank" class="course-link apprenticeshipContact">
                            @Html.Raw(Model.ProviderName + " website")
                        </a>
                    </dd>

                    @{
                    if (!string.IsNullOrEmpty(Model.Phone))
                        {
                        <dt class="phone-title">Phone number:</dt>
                        <dd id="phone" class="phone">@Html.Raw(Model.Phone)</dd>
                        }
                    }
                    @{
                    if (!string.IsNullOrEmpty(Model.Email))
                        {
                            <dt class="email-title">Email:</dt>
                            <dd id="email" class="email"><a href="mailto:@Html.Raw(Model.Email)">@Html.Raw(Model.Email)</a></dd>
                        }
                    }

                </dl>
            </div>
            <div class="panel--contact panel--satisfaction">
                <dl>
                    <dt>Employer satisfaction:</dt>
                    <dd>
                        <div class="rating rating--inline">
                            <span id="employer-satisfaction" class="rating-@Model.EmployerSatisfaction">
                                @Model.EmployerSatisfactionMessage
                            </span>
                            @CreateProgressBar(Model.EmployerSatisfactionMessage, (int)Model.EmployerSatisfaction)
                        </div>
                    </dd>
                    <dt>Learner satisfaction:</dt>
                    <dd>
                        <div class="rating rating--inline">
                            <span id="learner-satisfaction" class="rating-@Model.LearnerSatisfaction">
                                @Model.LearnerSatisfactionMessage
                            </span>
                            @CreateProgressBar(Model.LearnerSatisfactionMessage, (int)Model.LearnerSatisfaction)
                        </div>
                        @if (!(Model.EmployerSatisfactionMessage == "no data available" && Model.LearnerSatisfactionMessage == "no data available"))
                        {
                            <span class="satisfaction-source font-small">
                                Source: <a href="https://www.gov.uk/government/statistical-data-sets/fe-choices-performance-indicators" target="_blank">Skills Funding Agency FE Choices</a>
                            </span>
                        }
                    </dd>
                </dl>
            </div>
            <div class="panel-disclaimer">
                <h4>Content disclaimer</h4>
                <p>
                    Education and Skills Funding Agency cannot guarantee the accuracy of course information on this site and makes 
                    no representations about the quality of any courses which appear on the site. Education and Skills Funding Agency 
                    is not liable for any losses suffered as a result of any party relying on the course information 
                    provided.
                </p>
            </div>
            <div id="expand-collapse">
                <details>
                    <summary>Explain Type</summary>
                    <div class="panel panel-border-narrow">
                        Type explanation goes here
                    </div>
                </details>


                <details>
                    <summary>Explain levels</summary>
                    <div class="panel panel-border-narrow">
                        <p>Apprenticeships are set at different levels of difficulty from the equivalent of GCSE (level 2) up to postgraduate (level 7)</p>
                        <p><a href="https://www.gov.uk/what-different-qualification-levels-mean/overview" target="_blank" rel="external">More about levels</a></p>
                    </div>
                </details>
            </div>
        </div>       
    </div>
</main>
     

@helper CreateProgressBar(string message, int progress)
{
if (progress > 0)
{
        <div class="progress-container">
            <div class="progressbar" style="width: @progress%"></div>
        </div>
}
}