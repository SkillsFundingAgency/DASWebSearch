@using Sfa.Das.Sas.Shared.Components.ViewModels.Css.Interfaces
@model Sfa.Das.Sas.Shared.Components.ViewComponents.Fat.TrainingProviderSearchResultsItem
@inject ICssViewModel CssViewModel

<li id="@Model.Ukprn" class="das-search-results__list-item">
    <article class="das-search-result">
        <h2 class="@CssViewModel.HeadingMedium das-search-result__heading">
            <a class="@CssViewModel.Link das-search-result__heading-link" href="">@Model.Name</a>
            <span class="das-tag--national">National</span>
        </h2>

        <dl class="@CssViewModel.List  das-search-result__details">
            <dt class="das-search-result__details-title">Distance:</dt>
            <dd class="das-search-result__details-definition">@Model.Distance miles away</dd>
            <dt class="das-search-result__details-title">Training options:</dt>
            <dd class="das-search-result__details-definition">
                <div class="das-search-results__training-options">
                    <span class="@GetTrainingOptionsStatusClass("dayrelease",Model.DeliveryModes)">day release</span>
                    <span class="@GetTrainingOptionsStatusClass("blockrelease",Model.DeliveryModes)">block release</span>
                    <span class="@GetTrainingOptionsStatusClass("100percentemployer",Model.DeliveryModes)">at your location</span>
                </div>
            </dd>
            <dt class="das-search-result__details-title">Employer satisfaction:</dt>
            <dd class="das-search-result__details-definition">@Model.EmployerSatisfaction%</dd>
            <dt class="das-search-result__details-title">Learner satisfaction:</dt>
            <dd class="das-search-result__details-definition">@Model.LearnerSatisfaction%</dd>
            <dt class="das-search-result__details-title">Achievement rate:</dt>
            <dd class="das-search-result__details-definition">@Model.OverallAchievementRate%</dd>
        </dl>
    </article>
</li>


@functions
{

    string GetTrainingOptionsStatusClass(string trainingOption, IList<string> options)
    {
        var cssClass = "das-search-results__training-options";
        var classSuffix = string.Empty;

        if (options.Contains(trainingOption,StringComparer.OrdinalIgnoreCase))
        {
            classSuffix = "--tick";
        }
        else
        {
            classSuffix = "--cross";
        }

        return $"{cssClass}{classSuffix}";
    }


}